package application;

import org.junit.Test;
import org.junit.Before;
import static org.junit.Assert.*;

/**
 * TreasureTest - JUnit tests for Treasure class
 */
public class TreasureTest {
    
    private Treasure treasure;
    private OceanMap oceanMap;
    
    @Before
    public void setUp() {
        // Reset singleton before each test
        OceanMap.instance = null;
        oceanMap = OceanMap.getInstance(20);
        treasure = new Treasure(20, oceanMap);
    }
    
    /**
     * Test 1: Treasure is generated at a valid location
     */
    @Test
    public void testTreasureGeneration() {
        assertNotNull("Treasure location should not be null", treasure.getLocation());
    }
    
    /**
     * Test 2: Treasure is not placed on an island
     */
    @Test
    public void testTreasureNotOnIsland() {
        int x = (int)treasure.getLocation().x;
        int y = (int)treasure.getLocation().y;
        assertFalse("Treasure should not be on an island", oceanMap.isIsland(x, y));
    }
    
    /**
     * Test 3: Treasure isAt() method works correctly
     */
    @Test
    public void testTreasureIsAt() {
        int x = (int)treasure.getLocation().x;
        int y = (int)treasure.getLocation().y;
        assertTrue("isAt() should return true for treasure location", treasure.isAt(x, y));
    }
    
    /**
     * Test 4: Treasure is not discovered initially
     */
    @Test
    public void testTreasureNotDiscoveredInitially() {
        assertFalse("Treasure should not be discovered initially", treasure.isDiscovered());
    }
    
    /**
     * Test 5: Treasure can be discovered
     */
    @Test
    public void testTreasureDiscovery() {
        treasure.discover();
        assertTrue("Treasure should be discovered after calling discover()", treasure.isDiscovered());
    }
    
    /**
     * Test 6: Treasure location is within map bounds
     */
    @Test
    public void testTreasureLocationInBounds() {
        int x = (int)treasure.getLocation().x;
        int y = (int)treasure.getLocation().y;
        assertTrue("Treasure X should be >= 0", x >= 0);
        assertTrue("Treasure X should be < 20", x < 20);
        assertTrue("Treasure Y should be >= 0", y >= 0);
        assertTrue("Treasure Y should be < 20", y < 20);
    }
}